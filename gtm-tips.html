<!DOCTYPE html>
<html lang="tr">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta property="og:title" content="HighPing - Google Tag Manager Ä°puÃ§larÄ±">
  <meta property="og:type" content="article">
  <meta property="og:description" content="Goole Tag Manager'de En Ã‡ok KullanÄ±lan Ã–zel DeÄŸiÅŸkenler">
  <meta property="og:url" content="https://highping.com.tr/gtm-tips">
  <meta name="author" content="SÃ¼bhan Ahmet">
  <title>HighPing - Google Tag Manager Ä°puÃ§larÄ±</title>

  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-NHDT4TZ');</script>
  <!-- End Google Tag Manager -->

  <link rel="stylesheet" href="styles v2.css">
</head>

<body>

  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NHDT4TZ"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->

  <div class="accordion-body">
    <div class="wrapper">
      <div class="subhan">
        
      </div>
      <!-- <div class="allsides-7">7. Hover me </div> -->
      <div  class="nav-bar">
        <ul>
          <li>
            <a href="https://highping.com.tr" target="_blank" class="un">Ana Sayfa</a>
          </li>
          <li>
            <a href="https://blog.highping.com.tr" target="_blank" class="un">Blog</a>
          </li>
        </ul>
      </div>
      <!-- <span class="un">Underlined Text</span> -->

      <h2 class="header_text">GTM'de En Ã‡ok KullanÄ±lan Ã–zel DeÄŸiÅŸkenler</h2>

      <hr>


      <div class="accordion-panel">

        <div class="topic_title">
          <div class='order'>
            <span>1</span>
          </div>

          <h2>
            <button class="accordion-trigger" aria-expanded="false" aria-controls="accordion1-content">
              Sayfa BaÅŸlÄ±k DeÄŸerini Alma
            </button>
          </h2>
        </div>

        <div class="accordion-content" role="region" aria-labelledby="panel1-title" aria-hidden="true">
          <div>
            <p>TarayÄ±cÄ± sekmesinde gÃ¶rdÃ¼ÄŸÃ¼nÃ¼z site baÅŸlÄ±ÄŸÄ±nÄ± almak iÃ§in <code>
              <strong>title</strong> </code> etiketini kullanabiliriz..</p>

            <pre>
function pageTitle() {
  var title = document.querySelector('title').innerText
  return title
}
</pre>



          </div>
        </div>
      </div>

      <!-- ğŸ“Œ Sayfa BaÅŸlÄ±k DeÄŸeri END -->

      <hr>

      <!-- ğŸ“Œ Sayfa Yenilenme SayÄ±sÄ± -->

      <div class="accordion-panel">

        <div class="topic_title">
          <div class='order'>
            <span>2</span>
          </div>

          <h2>
            <button class="accordion-trigger" aria-expanded="false" aria-controls="accordion1-content">
              Sayfa Yenilenme SayÄ±sÄ±
            </button>
          </h2>
        </div>

        <div class="accordion-content" role="region" aria-labelledby="panel1-title" aria-hidden="true">
          <div>
            <p>Bir sayfanÄ±n kullanÄ±cÄ± tarafÄ±ndan kaÃ§ defa yenilendiÄŸini Ã¶lÃ§ebilirsiniz.</p>

            <pre>
function reloadCount() {
  var state = history.state || {};
  var reloadCount = state.reloadCount || 0;
  if (performance.navigation.type === 1) {
    state.reloadCount = ++reloadCount;
    history.replaceState(state, null, document.URL);
  } else if (reloadCount) {
    delete state.reloadCount;
    reloadCount = 0;
    history.replaceState(state, null, document.URL);
  }

  return reloadCount
}
</pre>



          </div>
        </div>
      </div>

      <!-- ğŸ“Œ Sayfa Yenilenme SayÄ±sÄ± END -->

      <hr>

      <!-- ğŸ“Œ DeÄŸiÅŸkenden Rakamlar Haricinde Her Åeyi Silmek -->

      <div class="accordion-panel">

        <div class="topic_title">
          <div class='order'>
            <span>3</span>
          </div>

          <h2>
            <button class="accordion-trigger" aria-expanded="false" aria-controls="accordion1-content">
              DeÄŸiÅŸkenden Rakamlar Haricinde Her Åeyi Silmek
            </button>
          </h2>
        </div>

        <div class="accordion-content" role="region" aria-labelledby="panel1-title" aria-hidden="true">
          <div>
            <p>
              Elde ettiÄŸiniz deÄŸiÅŸkenden rakamlar haricindeki tÃ¼m deÄŸerleri kaldÄ±rmak iÃ§in <code>
                <strong>regex</strong> </code> kullanabilirsiniz.
            </p>
            <pre>
var text = "Highping34.4--//96)qwerty%)"
var newText = text.replaceAll(/[^\d]/g, '')

// SonuÃ§: newText = 34496
</pre>
          </div>
        </div>
      </div>

      <!-- ğŸ“Œ DeÄŸiÅŸkenden Rakamlar Haricinde Her Åeyi Silmek END -->

      <hr>

      <!-- ğŸ“Œ ÃœrÃ¼n FiyatÄ±nÄ±n KÃ¼sÃ¼ratÄ±nÄ± NoktalÄ± Yapma -->

      <div class="accordion-panel">

        <div class="topic_title">
          <div class='order'>
            <span>4</span>
          </div>

          <h2>
            <button class="accordion-trigger" aria-expanded="false" aria-controls="accordion1-content">
              ÃœrÃ¼n FiyatÄ±nÄ±n KÃ¼sÃ¼ratÄ±nÄ± NoktalÄ± Yapma
            </button>
          </h2>
        </div>

        <div class="accordion-content" role="region" aria-labelledby="panel1-title" aria-hidden="true">
          <div>
            <p>
              GA4 de dahil olmak Ã¼zere tÃ¼m veri toplama araÃ§larÄ± Ã¼rÃ¼n fiyatÄ±, sepet deÄŸeri ve ya sipariÅŸ
              toplam tutarÄ±nÄ± <code><strong>Number</strong></code> formatÄ±nda kabul ediyor.
            </p>
            <p>
              Nedir Number formatÄ±?
              JavaScript'te Number formatÄ± sadece rakam kabul eden deÄŸiÅŸken tÃ¼rÃ¼dÃ¼r.
              Rakam haricinde kabul ettiÄŸi deÄŸer noktadÄ±r. Yani kÃ¼sÃ¼ratlarÄ± rakamla ayÄ±rabiliriz.
              Aksi taktirde ya kabul etmez ya da noktaya kadar bÃ¶lÃ¼mÃ¼ okur, geriye kanalarÄ± gÃ¶rmezden gelir.
              <br>
              TarayÄ±cÄ±da gÃ¶rdÃ¼ÄŸÃ¼nÃ¼z 1,435.56, 2.567,32 ÅŸeklinde tutarlarÄ± kabul etmez.
              <br>
              Bu ÅŸekilde gÃ¶nderdiÄŸiniz deÄŸerlerden 1. fiyatÄ± 435.56, 2. fiyatÄ± 32 tl olarak okuyacaktÄ±r.
              AralarÄ±nda Ã§ok bÃ¼yÃ¼k fark olduÄŸunu sÃ¶ylemeye gerek yoktur.
              <br>
              Yani GA4'Ã¼n kabul ettiÄŸi deÄŸerlerin 1435.56 TRY ve 2567.32 TRY (para birimi olmadan) ÅŸeklinde
              olmasÄ± gerekiyor. <br>
              <br>
              Bunun iÃ§in yapÄ±lacak bir kaÃ§ iÅŸlem var; Ã¶nce <code><strong>replace</strong></code>
              metodunu ele alalÄ±m.
            </p>

            <hr class="hr-text" id="hr-border" data-content="replace">

            <pre>
// YÃ¼z, bin, yÃ¼zbin ve ya milyonluk deÄŸerlerin virgÃ¼l ile ayrÄ±ldÄ±ÄŸÄ±, kÃ¼sÃ¼ratÄ±n ise nokta ile ayrÄ±ldÄ±ÄŸÄ± deÄŸerler.
// Bu tÃ¼r deÄŸerlerden noktaya dokunmadan virgÃ¼lÃ¼ silersek iÅŸlem tamamlanacak.

var fiyat = '1,567,435.56'
var yeniFiyat = fiyat.replaceAll(',','') // Yeni fiyat 1567435.56

// Tam tersi durumlarda; kÃ¼sÃ¼ratÄ±n virgÃ¼lle, diÄŸerlerin nokta ile ayrÄ±ldÄ±ÄŸÄ± deÄŸerler.
// Bu tÃ¼r deÄŸerlerde Ã¶nce noktalarÄ± kaldÄ±rÄ±p, sonda virgÃ¼lÃ¼ noktaya Ã§evirebiliriz.

var fiyat = '1.567.435,56'
var yeniFiyat = fiyat.replaceAll('.','').replace(',','.') // Yeni fiyat 1567435.56
</pre>

            <p>
              <code><strong>replace</strong> ve <strong>replaceAll</strong></code> haricinde bir fonksiyon
              var ki girilen tÃ¼m deÄŸerlerin kÃ¼sÃ¼ratÄ±nÄ± noktalÄ± yapar.
            </p>

            <hr class="hr-text" id="hr-border" data-content="function">

            <pre>
function totalPrice() {
  var price = '1.234.564,67'
  if (price.includes(',') || price.includes('.')) {
    var commaReplacePrice = price.replaceAll(',', '.')
    
    var parts = commaReplacePrice.split('.');
    if (price.length <= 4) {
      return Number(price)
    } else {
      return Number(parts.slice(0, -1).join('') + '.' + parts.slice(-1))
    }
  } else {
    return Number(price)
  }
}
</pre>
          </div>
        </div>
      </div>

      <!-- ğŸ“Œ ÃœrÃ¼n FiyatÄ±nÄ±n KÃ¼sÃ¼ratÄ±nÄ± NoktalÄ± Yapma END -->

      <hr>

      <!-- ğŸ“Œ TÄ±klanan Elementin DeÄŸerlerini Alma -->
      <div class="accordion-panel">

        <div class="topic_title">
          <div class='order'>
            <span>5</span>
          </div>

          <h2>
            <button class="accordion-trigger" aria-expanded="false" aria-controls="accordion1-content">
              TÄ±klanan Elementin DeÄŸerlerini Alma
            </button>
          </h2>
        </div>

        <div class="accordion-content" role="region" aria-labelledby="panel1-title" aria-hidden="true">
          <div>
            <p>JavaScript'te <code><strong>addEventListener</strong></code> ve ya
              <code><strong>onclick</strong></code> metodlarÄ± ile tarayÄ±cÄ±da tÄ±klanan
              Ã¶ÄŸenin elementini yakayabiliriz.</p>
            <p>
              Ã–nce metodu konsola yazarak doÄŸruluÄŸunu kontrol ediyoruz:
            </p>

            <hr class="hr-text" id="hr-border" data-content="addEventListener">

            <pre>
document.addEventListener("click", function (event) {
    var targetElement = event.target;
    console.log(targetElement);
    return "";
});
</pre>

            <hr class="hr-text" id="hr-border" data-content="onlick">

            <pre>
document.onclick = function (event) {
    var targetElement = event.target;
    console.log(targetElement);
    return "";
};
</pre>

            <p>Åimdi de en Ã§ok ihtiyaÃ§ duyulan elementin iÃ§indeki yazÄ±yÄ±, class, id ve ya varsa url deÄŸerlerini deÄŸiÅŸkene
              atayabilirsiniz.</p>

            <pre>
document.onclick = function (event) {
    elementText = event.target.innerText;
    elementClass = event.target.className;
    elementUrl = event.target.href;
    elementId = event.target.id;

    // "globalThis" deÄŸiÅŸkeni fonksyiondan Ã§Ä±kararak global deÄŸiÅŸken haline getirir.

    globalThis.elementText;
    globalThis.elementClass;
    globalThis.elementUrl;
    globalThis.elementId;
    return ''
};
</pre>

            <p>
              Fakat GTM tÄ±klama takiplerini JS kodu yazmadan da takip edilebileceÄŸimiz tetikleyiciler
              eklemiÅŸtir. <br>
              Bu tÄ±klanmalarÄ± da kendi iÃ§inde ikiye ayÄ±rmÄ±ÅŸ; Ã–ÄŸe TÄ±klanmalarÄ± ve Link TÄ±klanmalarÄ±. Fark
              ÅŸudur; tÃ¼m tÄ±klamalar Ã–ÄŸe TÄ±klamalarÄ±na dahildir, Link TÄ±klamalarÄ± ise iÃ§inde url (href)
              barÄ±ndÄ±ran buton ve ya link tÄ±klamalarÄ±dÄ±r. <br>
              Ã–ÄŸe TÄ±klamalarÄ± iÃ§in; <b>TÄ±klama > TÃ¼m Ã–ÄŸeler (Click > All Elements)</b>, Link TÄ±klamalarÄ±
              iÃ§in; <b>TÄ±klama > YazlÄ±nca BaÄŸlantÄ±lar (Click > Just Links)</b> tetikleyicisini oluÅŸturmamÄ±z
              gerekiyor. Tetikleyici, kullanÄ±cÄ±nÄ±n eylemini takip eder. Bu eylemin deÄŸerlerini deÄŸiÅŸkenler
              takip eder. DolayÄ±sÄ± ile sadece Click ve ya Link Click tetikleyicilerini kurmak yeterli
              sayÄ±lmaz. AynÄ± zamanda bu tetikleyici tÃ¼rÃ¼ne denk deÄŸiÅŸken tÃ¼rlerini de aktif etmemiz
              gerekiyor. <br>
              Bunun iÃ§in DeÄŸiÅŸkenler bÃ¶lÃ¼mÃ¼nden YerleÅŸik DeÄŸiÅŸkenle > TÄ±klama tÃ¼rÃ¼ndeki
              deÄŸiÅŸkenleri aktif ediyoruz.
              Ä°ÅŸlem sonucu ÅŸu olacak: Click tetikleyici ile tÄ±klanan elementin Class ismini, mentini ve ya
              url deÄŸerlerini Ã¶lÃ§ebilirsiniz. <br>
              Peki GTM tetikleyicileri ile bunu yapabiliyorsak yukarÄ±da bahsini ettiÄŸimiz JS metdorlar ne iÅŸe yarÄ±yor?
              <br>
              Bu metodlar yerine gÃ¶re bize GTM tetikleyicilerinin ulaÅŸamadÄ±ÄŸÄ± yerlerde yardÄ±mcÄ± olacaktÄ±r. Bunlardan baÅŸka konu baÅŸklÄ±klarÄ±nda bahsediyor olacaÄŸÄ±z.
            </p>

          </div>
        </div>
      </div>

      <!-- ğŸ“Œ TÄ±klanan Elementin DeÄŸerlerini Alma END -->

      <hr>

    </div>
  </div>

  <script src="/index v2.js" type="text/javascript"></script>



</body>

</html>
